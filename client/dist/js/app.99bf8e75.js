(function(t){function e(e){for(var a,i,c=e[0],s=e[1],l=e[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("section",{staticClass:"section"},[n("nav",{staticClass:"navbar is-fixed-top is-info",attrs:{role:"navigation","aria-label":"main navigation"}},[t._m(0),n("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[n("div",{staticClass:"navbar-start"},[n("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[t._v("Dashboard")]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/create"}},[t._v("Create")])],1),n("div",{staticClass:"navbar-end"},[n("div",{staticClass:"navbar-item"},[n("div",{staticClass:"buttons"},[t.authorized?n("span",[n("a",{staticClass:"button is-light",attrs:{href:t.logOutUrl},on:{click:function(e){return t.logout()}}},[t._v("Log Out")])]):n("span",[n("a",{staticClass:"button is-primary",attrs:{href:t.signUpUrl}},[n("strong",[t._v("Sign up")])]),n("a",{staticClass:"button is-light",attrs:{href:t.logInUrl}},[t._v("Log in")])])])])])])])]),n("section",{staticClass:"section"},[t.authorized?n("div",[n("div",{staticClass:"container"},[n("router-view")],1)]):n("div",[t._v(" Please login ")])])])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-brand"},[n("div",{staticClass:"navbar-item"},[n("h1",{staticClass:"subtitle has-text-white"},[t._v("Backend-Less Shortener")])]),n("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}})])])}],i=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("a15b"),n("d81d"),n("4fad"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("841c"),n("159b"),n("ddb0"),n("2b3d"),n("2fa7")),c=n("e587"),s=n("2f62"),l=n("bc3a"),u=n.n(l);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h="ln5q3kebflne181fjio3lnh0r",f="linker",m="us-west-2",v=new URLSearchParams(window.location.search),g=v.get("code")||null,b=window.location.origin,k={name:"app",data:function(){return{signUpUrl:"https://".concat(f,".auth.").concat(m,".amazoncognito.com/signup?response_type=code&client_id=").concat(h,"&redirect_uri=").concat(b),logInUrl:"https://".concat(f,".auth.").concat(m,".amazoncognito.com/login?response_type=code&client_id=").concat(h,"&redirect_uri=").concat(b),logOutUrl:"https://".concat(f,".auth.").concat(m,".amazoncognito.com/logout?client_id=").concat(h,"&logout_uri=").concat(b)}},created:function(){g?this.exchangeToken():this.exchangeRefreshToken()},methods:{convertJSON:function(t){var e=Object.entries(t).map((function(t){var e=Object(c["a"])(t,2),n=e[0],a=e[1],o=encodeURIComponent(n),r=encodeURIComponent(a);return"".concat(o,"=").concat(r)}));return e.join("&")},exchangeRefreshToken:function(){var t=this,e={grant_type:"refresh_token",client_id:h,refresh_token:localStorage.getItem("cognitoRefreshToken")},n=this.convertJSON(e);return u.a.post("https://".concat(f,".auth.").concat(m,".amazoncognito.com/oauth2/token"),n,Object(i["a"])({},"Content-Type","application/x-www-form-urlencoded")).then((function(e){var n=e.data;n.id_token&&(localStorage.setItem("cognitoIdentityToken",n.id_token),t.$store.commit("authorize"))})).catch((function(){t.$store.commit("deAuthorize")}))},exchangeToken:function(){var t=this,e={grant_type:"authorization_code",client_id:h,code:g,redirect_uri:b},n=this.convertJSON(e);return u.a.post("https://".concat(f,".auth.").concat(m,".amazoncognito.com/oauth2/token"),n,Object(i["a"])({},"Content-Type","application/x-www-form-urlencoded")).then((function(e){var n=e.data;n.id_token&&(localStorage.setItem("cognitoIdentityToken",n.id_token),localStorage.setItem("cognitoRefreshToken",n.refresh_token),t.$store.commit("authorize"));var a=Object.assign({},t.$route.query);delete a.code,t.$router.replace({query:a})})).catch((function(){t.$store.commit("deAuthorize")}))},logout:function(){localStorage.setItem("cognitoIdentityToken",null),localStorage.setItem("cognitoRefreshToken",null)}},computed:p({},Object(s["b"])(["authorized"]))},y=k,_=n("2877"),O=Object(_["a"])(y,o,r,!1,null,null,null),C=O.exports,w=n("8c4f"),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard"},[n("h1",{staticClass:"title"},[t._v("My links "),n("button",{staticClass:"button",on:{click:function(e){return t.toggleModal("create")}}},[t._v("Create")])]),n("table",{staticClass:"table is-fullwidth is-narrow is-striped"},[t._m(0),n("tbody",t._l(t.links,(function(e,a){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.id))]),n("td",[t._v(t._s(e.url))]),n("td",[t._v(t._s(e.timestamp))]),n("td",{staticClass:"has-text-right"},[n("button",{staticClass:"button is-small is-primary",on:{click:function(n){return t.toggleModal("edit",e,a)}}},[t._v("Update")]),n("button",{staticClass:"button is-small is-warning",on:{click:function(n){return t.deleteLink(e.id,a)}}},[t._v("Delete")]),n("a",{staticClass:"button is-small is-info",attrs:{target:"_blank",href:t.apiUrl+"/"+e.id}},[t._v("Try")])])])})),0)]),n("div",{staticClass:"modal",class:{"is-active":t.modalIsActive}},[n("div",{staticClass:"modal-background"}),n("div",{staticClass:"modal-card"},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t.modalTypeCreate?n("span",[t._v("Create")]):n("span",[t._v("Update")]),t._v(" Shortlink ")]),n("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){return t.toggleModal()}}})]),n("section",{staticClass:"modal-card-body"},[n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.model.id,expression:"model.id"}],staticClass:"input",attrs:{type:"text",placeholder:"Short Link",required:"",disabled:!t.modalTypeCreate},domProps:{value:t.model.id},on:{input:function(e){e.target.composing||t.$set(t.model,"id",e.target.value)}}})])]),n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.model.url,expression:"model.url"}],staticClass:"input",attrs:{type:"text",placeholder:"Url (Ex: http://mylink.com)",required:""},domProps:{value:t.model.url},on:{input:function(e){e.target.composing||t.$set(t.model,"url",e.target.value)}}})])])]),n("footer",{staticClass:"modal-card-foot"},[t.modalTypeCreate?n("button",{staticClass:"button is-success",on:{click:function(e){return t.createLink()}}},[t._v("Create")]):n("button",{staticClass:"button is-success",on:{click:function(e){return t.updateLink()}}},[t._v("Update")]),n("button",{staticClass:"button",on:{click:function(e){return t.toggleModal()}}},[t._v("Cancel")])])])])])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Short Link")]),n("th",[t._v("Url")]),n("th",[t._v("Time Stamp")]),n("th")])])}];function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(n,!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P={name:"dashboard",data:function(){return{apiUrl:"https://d32w1bo3g0.execute-api.us-west-2.amazonaws.com/Prod",modalIsActive:!1,model:{id:"",url:""},currentLink:{},currentIndex:0,modalTypeCreate:!0}},created:function(){this.fetchData()},computed:I({},Object(s["b"])(["links"])),methods:{toggleModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.modalTypeCreate="create"===t,this.modalIsActive=!this.modalIsActive,"edit"===t&&(this.currentLink=e,this.currentIndex=n,this.model.id=e.id,this.model.url=e.url)},fetchData:function(){var t=this;u.a.get("".concat(this.apiUrl,"/links"),{headers:{Authorization:window.localStorage.getItem("cognitoIdentityToken")}}).then((function(e){return t.$store.commit("hydrateLinks",e.data)})).catch((function(){return t.$store.commit("drainLinks")}))},createLink:function(){var t=this;u.a.post("".concat(t.apiUrl,"/links"),t.model,{headers:{Authorization:window.localStorage.getItem("cognitoIdentityToken")}}).then((function(e){e.data.error?alert(e.data.message):(t.toggleModal(),t.$store.commit("addLink",e.data))})).catch((function(t){alert(t)}))},updateLink:function(){var t=this;t.currentLink.url=t.model.url,u.a.put("".concat(t.apiUrl,"/links/").concat(t.currentLink.id),t.currentLink,{headers:{Authorization:window.localStorage.getItem("cognitoIdentityToken")}}).then((function(e){t.toggleModal(),t.$store.commit("updateLink",e.data,t.currentIndex)})).catch((function(t){alert(t)}))},deleteLink:function(t,e){if(confirm("Are you sure you want to delete '".concat(t,"'"))){var n=this;u.a.delete("".concat(n.apiUrl,"/links/").concat(t),{headers:{Authorization:window.localStorage.getItem("cognitoIdentityToken")}}).then((function(t){t.data.success?n.$store.commit("removeLink",e):alert(t.data.message)})).catch((function(t){alert(t)}))}}}},L=P,T=Object(_["a"])(L,j,S,!1,null,null,null),z=T.exports;a["a"].use(w["a"]);var U=[{path:"/",name:"dashboard",component:z}],$=new w["a"]({mode:"history",base:"/",routes:U}),A=$;n("a434");a["a"].use(s["a"]);var D=new s["a"].Store({state:{authorized:!1,links:[]},mutations:{authorize:function(t){t.authorized=!0},deAuthorize:function(t){t.authorized=!1},hydrateLinks:function(t,e){t.links=e},drainLinks:function(t){t.links.length=0},addLink:function(t,e){t.links.push(e)},removeLink:function(t,e){t.links.splice(e,1)},updateLink:function(t,e,n){t.links[n]=e}},getters:{},actions:{},modules:{}});n("b383"),a["a"].config.productionTip=!1,new a["a"]({router:A,store:D,render:function(t){return t(C)}}).$mount("#app")},b383:function(t,e,n){}});
//# sourceMappingURL=app.99bf8e75.js.map